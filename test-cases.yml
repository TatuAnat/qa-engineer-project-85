---
- summary: |
    Проверка входа в систему с помощью GitHub
  requirement: |
    Пользователь должен иметь возможность войти в систему через аккаунт GitHub
  prerequisites: |
    Пользователь имеет действующий аккаунт GitHub и ранее не был авторизован в системе Codebattle
  test-data: |
    Учетная запись GitHub: TatuAnat
  steps:
    - Нажимаем кнопку "Sign in" на главной странице
    - На странице входа нажимаем "Sign in with Github"
    - Подтверждаем доступ Codebattle к аккаунту GitHub (если требуется)
  expected-result: |
    пользователь перенаправляется на страницу https://codebattle.hexlet.io/#lobby и авторизован

- summary: |
    Проверка успешной регистрации нового пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться, указав уникальный email, никнейм и пароль
  prerequisites: |
    Email prova@prova.com не зарегистрирован в системе
  test-data: |
    Nickname: TaniaNew
    Email: prova@prova.com
    Password: password123
    Password Confirmation: 12345678A!
  steps:
    - Переходим на страницу "Sign Up"
    - Вводим Nickname TaniaNew
    - Вводим Email prova@prova.com
    - Вводим Password и подтверждаем его
    - Нажимаем кнопку "Submit"
    - Проверяем, что регистрация прошла успешно
  expected-result: |
    пользователь перенаправлен на главную страницу и авторизован


- summary: |
    Проверка входа в систему с помощью email и пароля
  requirement: |
    Пользователь должен иметь возможность войти в систему, используя корректный email и пароль
  prerequisites: |
    Учетная запись с email proval@prova.com и паролем 12345678A! уже существует в системе
  test-data: |
    Email: proval@prova.com
    Password: 12345678A!
  steps:
    - Переходим на страницу "Sign In"
    - Вводим Email proval@prova.com
    - Вводим Password 12345678A!
    - Нажимаем кнопку "Submit"
  expected-result: |
    пользователь успешно авторизован и перенаправлен на главную страницу


---
- summary: |
    Проверка запуска простой игры без регистрации (Try Simple Battle)
  requirement: |
    Пользователь должен иметь возможность начать простую игру без регистрации
  prerequisites: |
    Пользователь не авторизован, открыт главный экран Codebattle
  test-data: |
    Нет
  steps:
    - Открываем главную страницу Codebattle
    - Нажимаем кнопку "Try Simple Battle"
    - Проверяем, что открывается игровая страница с заданием (Game Page)
    - Убеждаемся, что выводится всплывающее окно-инструкция (guide)
    - Нажимаем "Next" до конца инструкции или "Skip guide"

  expected-result: |
    можно ввести код, нажать "Run" и получить результат


---
- summary: |
    Проверка сброса кода через кнопку "Reset solution"
  requirement: |
    Пользователь должен иметь возможность сбросить текущую версию решения и вернуться к первоначальному коду
  prerequisites: |
    Игра активна или завершена, пользователь находится в редакторе кода и изменил исходный шаблон
  test-data: |
    Любой язык программирования, изменённый шаблон кода
  steps:
    - Открываем редактор с текущим кодом
    - Вносим произвольные изменения в решение
    - Нажимаем кнопку с тремя точками рядом с именем пользователя
    - Выбираем опцию "Reset solution"
  expected-result: |
    код в редакторе сбрасывается к начальному шаблону

---
- summary: |
    Проверка смены языка программирования в редакторе
  requirement: |
    Пользователь должен иметь возможность выбрать язык программирования из списка доступных перед началом решения задачи
  prerequisites: |
    Пользователь находится в редакторе кода
  test-data: |
    Текущий язык: Java 24; Новый язык: C# 9.0.203
  steps:
    - Открываем редактор игры
    - Нажимаем на выпадающий список с языками (например, "Java 24")
    - Выбираем из списка язык "C# 9.0.203"
    - Проверяем, что редактор переключился на выбранный язык
  expected-result: |
    шаблон кода обновился под выбранный язык

---
- summary: |
    Проверка переключения между вкладками "TASK" и "OUTPUT"
  requirement: |
    Пользователь должен иметь возможность переключаться между вкладками "TASK" (описание задания) и "OUTPUT" (результаты тестов)
  prerequisites: |
    Пользователь находится на странице активной или завершённой игры
  test-data: |
    Нет
  steps:
    - Убедиться, что по умолчанию активна вкладка "TASK"
    - Нажать на вкладку "OUTPUT"
    - Проверить, что отображается результат тестирования (успехи/ошибки)
    - Снова нажать на вкладку "TASK"

  expected-result: |
    снова отображается описание задания

---
- summary: |
    Проверка переключения темы редактора (Dark Mode / Light Mode)
  requirement: |
    Пользователь должен иметь возможность переключать тему редактора между светлой и тёмной
  prerequisites: |
    Пользователь находится на странице редактора с открытым заданием
  test-data: |
    Нет
  steps:
    - Убедиться, что текущая тема — светлая (фон белый, текст тёмный)
    - Нажать на иконку переключения темы (полумесяц)
    - Проверить, что фон стал тёмным, а текст — светлым
    - Нажать повторно на иконку темы
  expected-result: |
    редактор вернулся в светлую тему

---
- summary: |
    Проверка, что после нажатия "Try again" запускается новая игра с другим заданием
  requirement: |
    После завершения текущей игры, при нажатии на кнопку "Try again", должна запускаться новая игра с новой задачей
  prerequisites: |
    Игра завершена, отображается экран Game Over
  test-data: |
    Первая задача: name_concat
  steps:
    - Убедиться, что игра завершена и активна кнопка "Try again"
    - Нажать на кнопку "Try again"
  expected-results: |
    задача (task) отличается от предыдущей (например, новая задача new_task)


---
- summary: |
    Проверка переключения между вкладками Lobby, Tournaments и History
  requirement: |
    После входа в систему пользователь должен иметь возможность переключаться между тремя вкладками: Lobby, Tournaments и History
  prerequisites: |
    Пользователь авторизован и находится на главной странице Codebattle
  test-data: |
    Учетная запись GitHub: TatuAnat
  steps:
    - Проверить, что по умолчанию открыта вкладка "Lobby" и отображается список игроков
    - Нажать на вкладку "Tournaments"
    - Убедиться, что отображаются активные и завершённые турниры
    - Нажать на вкладку "History"
  expected_result: |
    При переключении вкладок интерфейс должен обновляться и отображать соответствующий контент

- summary: |
    Проверка работы кнопки "Show" в лобби
  requirement: |
    Пользователь должен иметь возможность наблюдать за текущей игрой между другими игроками в режиме просмотра
  prerequisites: |
    Пользователь авторизован, в лобби отображается хотя бы одна активная игра с кнопкой "Show"
  test-data: |
    Игра: VitalikFront vs kKreIKk
  steps:
    - Перейти на вкладку "Lobby"
    - Найти игру с кнопкой "Show"
    - Нажать "Show"
  expected_result: |
    Открывается текущая игра в режиме только для чтения: редакторы игроков отображаются, но пользователь не может редактировать код или отправлять решение

- summary: |
    Проверка запуска новой игры через кнопку "Fight"
  requirement: |
    Пользователь должен иметь возможность начать новую игру с другим доступным игроком, нажав кнопку "Fight"
  prerequisites: |
    Пользователь авторизован и в лобби есть игрок с доступной кнопкой "Fight"
  test-data: |
    Игрок: YodaYacc
  steps:
    - Перейти на вкладку "Lobby"
    - Найти игрока с кнопкой "Fight"
    - Нажать "Fight"
  expected_result: |
    Начинается новая игра между пользователем и выбранным соперником, открывается редактор кода и начинается отсчёт времени 29:59


- summary: |
    Проверка продолжения ранее начатой игры через кнопку "Continue"
  requirement: |
    Пользователь должен иметь возможность вернуться в ранее начатую игру с помощью кнопки "Continue"
  prerequisites: |
    У пользователя есть активная незавершённая игра, отображается кнопка "Continue"
  test-data: |
    Игра: PlanckProcessor vs TatuAnat
  steps:
    - Перейти на вкладку "Lobby"
    - Найти строку с кнопкой "Continue"
    - Нажать "Continue"
  expected_result: |
    Пользователь возвращается в свою текущую незавершённую игру, видит сохранённый код и может продолжить выполнение задачи


---
- summary: |
    Проверка работы кнопки "Back to Home" на странице игры
  requirement: |
    Пользователь должен иметь возможность вернуться на главный экран (лобби), покинув текущую игру без завершения сессии
  prerequisites: |
    Пользователь находится на активной странице игры (в процессе или после завершения)
  test-data: |
    Игра: reverse_even между TatuAnat и VictorLebowski
  steps:
    - Открыть игровую сессию
    - Нажать кнопку "Back to Home" в правом верхнем углу
    - Проверить, что пользователь перенаправлен на главный экран
  expected_result: |
    После нажатия "Back to Home" пользователь возвращается на главный экран (Lobby), где отображается список игроков и можно продолжить игру

---
- summary: |
    Проверка ошибки при попытке начать новую игру, когда пользователь уже участвует в другой
  requirement: |
    Если пользователь уже находится в активной игре, система не должна позволять начать новую игру и должна показать соответствующее сообщение об ошибке
  prerequisites: |
    У пользователя есть активная незавершённая игра
  test-data: |
    Игрок: TatuAnat (участвует в игре с VictorLebowski)
  steps:
    - Перейти на вкладку "Lobby"
    - Нажать кнопку "Fight" рядом с другим игроком (например, Alisina)
  expected_result: |
    Пользователь получает уведомление об ошибке "already_in_a_game" и не может начать новую игру, пока не завершит текущую

---
- summary: |
    Проверка отправки сообщения в общий чат лобби
  requirement: |
    Пользователь должен иметь возможность отправлять сообщения в общий чат, доступный на главной странице
  prerequisites: |
    Пользователь авторизован и находится на вкладке "Lobby"
  test-data: |
    Сообщение: Hello all
  steps:
    - Прокрутить вниз до блока с чатом
    - Убедиться, что отображается канал "Chat:lobby"
    - Ввести сообщение "Hello all"
    - Нажать кнопку "Send"
  expected_result: |
    После нажатия "Send", сообщение должно отобразиться в чате с соответствующим именем пользователя, и быть доступным другим участникам в реальном времени
    
