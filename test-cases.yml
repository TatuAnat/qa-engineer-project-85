- summary: |
    Проверка входа в систему с помощью GitHub
  requirement: |
    Пользователь должен иметь возможность войти в систему через аккаунт GitHub
  prerequisites: |
    Пользователь имеет действующий аккаунт GitHub и ранее не был авторизован в системе Codebattle
  test-data: |
    Учетная запись GitHub: TatuAnat
  steps:
    - Нажимаем кнопку "Sign in" на главной странице
    - На странице входа нажимаем "Sign in with Github"
    - Подтверждаем доступ Codebattle к аккаунту GitHub (если требуется)
  expected-result: |
    пользователь перенаправляется на страницу https://codebattle.hexlet.io/#lobby и успешно авторизован

- summary: |
    Проверка успешной регистрации нового пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться, указав уникальный email, никнейм и пароль
  prerequisites: |
    Email prova@prova.com не зарегистрирован в системе
  test-data: |
    Nickname: TaniaNew
    Email: prova@prova.com
    Password: password123
    Password Confirmation: 12345678A!
  steps:
    - Переходим на страницу "Sign Up"
    - Вводим Nickname TaniaNew
    - Вводим Email prova@prova.com
    - Вводим Password и подтверждаем его
    - Нажимаем кнопку "Submit"
    - Проверяем, что регистрация прошла успешно
  expected-result: |
    пользователь перенаправлен на главную страницу и успешно авторизован


- summary: |
    Проверка входа в систему с помощью email и пароля
  requirement: |
    Пользователь должен иметь возможность войти в систему, используя корректный email и пароль
  prerequisites: |
    Учетная запись с email proval@prova.com и паролем 12345678A! уже существует в системе
  test-data: |
    Email: proval@prova.com
    Password: 12345678A!
  steps:
    - Переходим на страницу "Sign In"
    - Вводим Email proval@prova.com
    - Вводим Password 12345678A!
    - Нажимаем кнопку "Submit"
  expected-result: |
    пользователь успешно авторизован и перенаправлен на главную страницу, где может участвовать в играх и турнирах



- summary: |
    Проверка прохождения гайда через "Next"
  requirement: |
    Пользователь должен иметь возможность пройти гайд, пошагово нажимая "Next"
  prerequisites: |
    Пользователь не авторизован, открыт главный экран Codebattle
  test-data: |
    Нет
  steps:
    - Открываем главную страницу Codebattle
    - Нажимаем кнопку "Try Simple Battle"
    - Проверяем, что открывается игровая страница с заданием (Game Page)
    - Нажимаем "Next" до завершения гайда
  expected-result: |
    После завершения гайда можно ввести код, нажать "Run" и получить результат

- summary: |
    Проверка пропуска гайда через "Skip guide"
  requirement: |
    Пользователь должен иметь возможность пропустить гайд
  prerequisites: |
    Пользователь не авторизован, открыт главный экран Codebattle
  test-data: |
    Нет
  steps:
    - Открываем главную страницу Codebattle
    - Нажимаем кнопку "Try Simple Battle"
    - В появившемся окне нажимаем "Skip guide"
  expected-result: |
    Открывается редактор, в который можно ввести код, нажать "Run" и получить результат

- summary: |
    Проверка сброса кода через кнопку "Reset solution"
  requirement: |
    Пользователь должен иметь возможность сбросить текущую версию решения и вернуться к первоначальному коду
  prerequisites: |
    Игра активна
  test-data: |
    Текущий язык: Java 24
    
    Шаблон кода:
    package solution;

    import java.util.*;
    import java.util.stream.*;

    public class Solution {
        public Integer solution(List<Integer> numbers) {
            Integer ans = 0;
            return ans;
        }
    }
  steps:
    - Открываем редактор с текущим кодом
    - Вносим произвольные изменения в решение
    - Нажимаем кнопку с тремя точками рядом с именем пользователя
    - Выбираем опцию "Reset solution"
  expected-result: |
    Первоначальный код должен совпадать с изначальным шаблоном для языка Java 24.



- summary: |
    Проверка смены языка программирования в редакторе
  requirement: |
    Пользователь должен иметь возможность выбрать язык программирования из списка доступных перед началом решения задачи
  prerequisites: |
    Пользователь находится в редакторе кода
  test-data: |
    Текущий язык: Java 24; Новый язык: C# 9.0.203
  steps:
    - Открываем редактор игры
    - Нажимаем на выпадающий список с языками (например, "Java 24")
    - Выбираем из списка язык "C# 9.0.203"
    - Проверяем, что редактор переключился на выбранный язык
  expected-result: |
    шаблон кода обновился под выбранный язык


- summary: |
    Проверка переключения между вкладками "TASK" и "OUTPUT"
  requirement: |
    Пользователь должен иметь возможность переключаться между вкладками "TASK" (описание задания) и "OUTPUT" (результаты тестов)
  prerequisites: |
    Пользователь находится на странице активной игры
  test-data: |
    Нет
  steps:
    - Убедиться, что по умолчанию активна вкладка "TASK"
    - Нажать на вкладку "OUTPUT"
    - Проверить, что отображается результат тестирования (успехи/ошибки)
    - Снова нажать на вкладку "TASK"

  expected-result: |
    снова отображается описание задания


- summary: |
    Проверка переключения темы редактора (Dark Mode / Light Mode)
  requirement: |
    Пользователь должен иметь возможность переключать тему редактора между светлой и тёмной
  prerequisites: |
    Пользователь находится на странице редактора с открытым заданием
  test-data: |
    Нет
  steps:
    - Убедиться, что текущая тема — светлая (фон белый, текст тёмный)
    - Нажать на иконку переключения темы (полумесяц)
    - Проверить, что фон стал тёмным, а текст — светлым
    - Нажать повторно на иконку темы
  expected-result: |
    редактор вернулся в светлую тему


- summary: |
    Проверка, что после нажатия "Try again" запускается новая игра с другим заданием
  requirement: |
    После завершения текущей игры, при нажатии на кнопку "Try again", должна запускаться новая игра с новой задачей
  prerequisites: |
    Игра завершена, отображается экран Game Over
  test-data: |
    Первая задача: name_concat
  steps:
    - Убедиться, что игра завершена и активна кнопка "Try again"
    - Нажать на кнопку "Try again"
  expected-result: |
    задача (new_task) отличается от предыдущей (name_concat)  (например, новая задача new_task)



- summary: |
    Проверка переключения между вкладками Lobby, Tournaments и History
  requirement: |
    После входа в систему пользователь должен иметь возможность переключаться между тремя вкладками: Lobby, Tournaments и History
  prerequisites: |
    Пользователь авторизован и находится на главной странице Codebattle
  test-data: |
    Учетная запись GitHub: TatuAnat
  steps:
    - Проверить, что по умолчанию открыта вкладка "Lobby" и отображается список игроков
    - Нажать на вкладку "Tournaments"
    - Убедиться, что отображаются активные и завершённые турниры
    - Нажать на вкладку "History"
  expected-result: |
    При переключении вкладок интерфейс должен обновляться и отображать соответствующий контент

- summary: |
    Проверка работы кнопки "Show" в лобби
  requirement: |
    Пользователь должен иметь возможность наблюдать за текущей игрой между другими игроками в режиме просмотра
  prerequisites: |
    Пользователь авторизован, в лобби отображается хотя бы одна активная игра с кнопкой "Show"
  test-data: |
    Игра: VitalikFront vs kKreIKk
  steps:
    - Перейти на вкладку "Lobby"
    - Найти игру с кнопкой "Show"
    - Нажать "Show"
  expected-result: |
    Открывается текущая игра в режиме только для чтения: редакторы игроков отображаются, но пользователь не может редактировать код

- summary: |
    Проверка запуска новой игры через кнопку "Fight"
  requirement: |
    Пользователь должен иметь возможность начать новую игру с другим доступным игроком, нажав кнопку "Fight"
  prerequisites: |
    Пользователь авторизован и в лобби есть игрок с доступной кнопкой "Fight"
  test-data: |
    Игрок: YodaYacc
  steps:
    - Перейти на вкладку "Lobby"
    - Найти игрока с кнопкой "Fight"
    - Нажать "Fight"
  expected-result: |
    Начинается новая игра между пользователем и выбранным соперником, открывается редактор кода и начинается отсчёт времени 29:59


- summary: |
    Проверка продолжения ранее начатой игры через кнопку "Continue"
  requirement: |
    Пользователь должен иметь возможность вернуться в ранее начатую игру с помощью кнопки "Continue"
  prerequisites: |
    У пользователя есть активная незавершённая игра, отображается кнопка "Continue"
  test-data: |
    Игра: PlanckProcessor vs TatuAnat
  steps:
    - Перейти на вкладку "Lobby"
    - Найти строку с кнопкой "Continue"
    - Нажать "Continue"
  expected-result: |
    Пользователь возвращается в свою текущую незавершённую игру, видит сохранённый код и может продолжить выполнение задачи



- summary: |
    Проверка работы кнопки "Back to Home" на странице игры
  requirement: |
    Пользователь должен иметь возможность вернуться на главный экран (лобби), покинув текущую игру без завершения сессии
  prerequisites: |
    Пользователь находится на странице игры
  test-data: |
    Игра: reverse_even между TatuAnat и VictorLebowski
  steps:
    - Открыть игровую сессию
    - Нажать кнопку "Back to Home" в правом верхнем углу
    - Проверить, что пользователь перенаправлен на главный экран
  expected-result: |
    После нажатия "Back to Home" пользователь возвращается на главный экран (Lobby), где отображается список игроков и можно продолжить игру


- summary: |
    Проверка ошибки при попытке начать новую игру, когда пользователь уже участвует в другой
  requirement: |
    Если пользователь уже находится в активной игре, система не должна позволять начать новую игру и должна показать соответствующее сообщение об ошибке
  prerequisites: |
    У пользователя есть активная незавершённая игра
  test-data: |
    Игрок: TatuAnat (участвует в игре с VictorLebowski)
  steps:
    - Перейти на вкладку "Lobby"
    - Нажать кнопку "Fight" рядом с другим игроком (например, Alisina)
  expected-result: |
    Пользователь получает уведомление об ошибке "already_in_a_game" и не может начать новую игру, пока не завершит текущую


- summary: |
    Проверка отправки сообщения в общий чат лобби
  requirement: |
    Пользователь должен иметь возможность отправлять сообщения в общий чат, доступный на главной странице
  prerequisites: |
    Пользователь авторизован и находится на вкладке "Lobby"
  test-data: |
    Сообщение: Hello all
  steps:
    - Прокрутить вниз до блока с чатом
    - Убедиться, что отображается канал "Chat:lobby"
    - Ввести сообщение "Hello all"
    - Нажать кнопку "Send"
  expected-result: |
    После нажатия "Send", сообщение должно отобразиться в чате с соответствующим именем пользователя, и быть доступным другим участникам в реальном времени


- summary: |
    Проверка отправки приватного сообщения через чат
  requirement: |
    Пользователь должен иметь возможность отправить личное сообщение другому онлайн-пользователю
  prerequisites: |
    Пользователь авторизован, и в чате отображаются другие онлайн-пользователи
  test-data: |
    Получатель: vtm
    Сообщение: hello vtm
  steps:
    - Перейти в правую панель со списком пользователей
    - Нажать иконку сообщения (конверт)
    - Выбрать пользователя vtm
    - Ввести сообщение "hello vtm" в приватный канал
    - Нажать кнопку "Send"

  expected-result: |
    Приватный канал открыт, сообщение успешно отображается в чате и помечено как [private]

- summary: |
    Проверка создания приглашения на игру с другом через форму "Create a Game"
  requirement: |
    Пользователь должен иметь возможность создать приглашение на игру, выбрав параметры и противника из списка онлайн
  prerequisites: |
    Пользователь авторизован
    В списке онлайн-пользователей доступен пользователь "vladimir97"
  test-data: |
    Противник: vladimir97
    Уровень: 2 звезды
    Тип игры: With a friend
    Таймер: 8 минут
    Задача: случайная (random task)
    Теги: hash-maps, strings
  steps:
    - Нажать кнопку "Create a Game" на главной странице
    - Выбрать уровень сложности 2 звезды
    - Выбрать тип игры "With a friend"
    - Установить таймер на 8 минут
    - В выпадающем списке "Choose opponent" выбрать пользователя "vladimir97"
    - В списке тегов выбрать "hash-maps" и "strings"
    - Убедиться, что поле задачи установлено на "random task"
    - Нажать кнопку "Create invite"
  expected-result: |
    Приглашение успешно создано

- summary: |
    Проверка просмотра активного турнира через кнопку "Show"
  requirement: |
    Пользователь должен иметь возможность просматривать информацию о текущем турнире, нажав кнопку "Show" во вкладке "Tournaments"
  prerequisites: |
    Пользователь авторизован, существует активный турнир, отображается в разделе "Live tournaments"
  test-data: |
    Название турнира: Dan's fancy tournament
  steps:
    - Перейти во вкладку "Tournaments"
    - Найти активный турнир "Dan's fancy tournament"
    - Нажать кнопку "Show" рядом с ним
    - Убедиться, что открывается страница турнира с заголовком
  expected-result: |
    Открывается страница с деталями турнира и возможность присоединиться

- summary: |
    Проверка возможности отправки сообщений в чат турнира
  requirement: |
    Участники турнира должны иметь возможность общаться в общем чате турнира до и во время проведения игр
  prerequisites: |
    Пользователь авторизован и присоединился к активному турниру (находится на странице турнира)
  test-data: |
    Сообщение: Hello tournament!
  steps:
    - Присоединиться к активному турниру
    - Убедиться, что активна вкладка General (чат)
    - Ввести сообщение "Hello tournament!"
    - Нажать кнопку "Send"
  expected-result: |
    Сообщение успешно отправлено и отображается в общем чате турнира под именем пользователя


- summary: |
    Проверка отображения и переключения вкладок рейтинга (Leaderboard)
  requirement: |
    Пользователь должен иметь возможность просматривать рейтинг игроков по неделе, месяцу и за всё время
  prerequisites: |
    Пользователь авторизован и находится на главной странице Codebattle
  test-data: |
    Нет
  steps:
    - Найти блок "LEADERBOARD" справа на главной странице
    - Убедиться, что отображаются очки и список лидеров за текущую неделю (WEEK)
    - Нажать на вкладку "MONTH"
    - Проверить, что рейтинг обновился и показывает очки за месяц
    - Нажать на вкладку "ALL"
    - Убедиться, что отображается рейтинг за всё время
  expected-result: |
    Вкладки WEEK, MONTH и ALL работают корректно. При переключении отображается соответствующий список лидеров с именем и очками

- summary: |
    Проверка перехода по пункту меню "My Profile"
  requirement: |
    При нажатии на "My Profile" должен открываться профиль пользователя
  prerequisites: |
    Пользователь авторизован и открыт выпадающий список меню
  test-data: |
    Нет
  steps:
    - Нажать на иконку пользователя в правом верхнем углу
    - Нажать на "My Profile"
  expected-result: |
    Открывается страница профиля текущего пользователя

- summary: |
    Проверка перехода по пункту меню "Settings"
  requirement: |
    Пользователь должен иметь доступ к настройкам своего профиля
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть выпадающее меню
    - Кликнуть "Settings"
  expected-result: |
    Открывается страница настроек пользователя

- summary: |
    Проверка перехода по пункту меню "Users rating"
  requirement: |
    Пользователь должен видеть общий рейтинг пользователей
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть меню пользователя
    - Выбрать "Users rating"
  expected-result: |
    Открывается таблица с рейтингами пользователей

- summary: |
    Проверка перехода по пункту меню "Tournaments"
  requirement: |
    Пользователь должен иметь доступ к турнирам
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Кликнуть по меню
    - Перейти на "Tournaments"
  expected-result: |
    Открывается список текущих и завершённых турниров

- summary: |
    Проверка перехода по пункту меню "Tasks"
  requirement: |
    Пользователь должен видеть список доступных задач
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть выпадающее меню
    - Кликнуть "Tasks"
  expected-result: |
    Загружается страница с задачами

- summary: |
    Проверка перехода по пункту меню "Clans"
  requirement: |
    Пользователь должен иметь возможность просматривать страницу кланов
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать на меню пользователя
    - Кликнуть "Clans"
  expected-result: |
    Открывается страница кланов

- summary: |
    Проверка перехода по пункту "SourceCode"
  requirement: |
    Пользователь должен быть перенаправлен на репозиторий проекта
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть меню
    - Нажать "SourceCode"
  expected-result: |
    Открывается GitHub репозиторий проекта в новой вкладке

- summary: |
    Проверка перехода по пункту "Hexlet"
  requirement: |
    Пользователь должен быть перенаправлен на сайт Hexlet
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Кликнуть по меню
    - Выбрать "Hexlet"
  expected-result: |
    Открывается сайт Hexlet в новой вкладке

- summary: |
    Проверка перехода по пункту "Join Discord"
  requirement: |
    Пользователь должен перейти по ссылке на сервер Discord
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть меню
    - Нажать на "Join Discord"
  expected-result: |
    Открывается приглашение на сервер Discord в новой вкладке

- summary: |
    Проверка перехода по пункту "Tg#codebattle"
  requirement: |
    Пользователь должен попасть в Telegram-канал проекта
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать на иконку пользователя
    - Выбрать пункт "Tg#codebattle"
  expected-result: |
    Открывается ссылка на Telegram в новой вкладке

- summary: |
    Проверка выхода из системы (Sign Out)
  requirement: |
    Пользователь должен иметь возможность выйти из аккаунта
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Открыть меню пользователя
    - Нажать на "Sign Out"
  expected-result: |
    Пользователь выходит из системы и перенаправляется на главную неавторизованную страницу

- summary: |
    Проверка отображения и работы элементов на странице настроек (Settings)
  requirement: |
    Страница "Settings" должна содержать все поля и элементы для настройки профиля пользователя
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать на имя пользователя в правом верхнем углу
    - Выбрать пункт меню "Settings"
  expected-result: |
    На странице отображаются и доступны следующие элементы 
      Поле "Your name" с текущим никнеймом пользователя,
      Выпадающий список "Your weapon" (выбор языка программирования), 
      Поле "Your clan" для ввода названия клана,
      Переключатели выбора типа звука: Dendy, CS, Standard, Silent,
      Ползунок громкости звука (Select sound level),
      Кнопка "Save" для сохранения настроек,
      Ссылки: "Link Github" и "Link Discord"

- summary: |
    Проверка отображения страницы "Users rating"
  requirement: |
    Страница рейтинга пользователей должна отображать таблицу с рейтингами, сортировкой и фильтрами
  prerequisites: |
    Пользователь авторизован
  test-data: |
    Нет
  steps:
    - Нажать на имя пользователя в правом верхнем углу
    - Выбрать пункт "Users rating"
  expected-result: |
    Пользователь перенаправлен на страницу рейтинга.
    Отображаются следующие элементы:
      Переключатели фильтра: "weekly", "monthly", "total",
      Строка поиска по имени пользователя,
      Селектор количества пользователей на странице (Users per page),
      Таблица с колонками Номер (#),Имя пользователя (User),Ранг (Rank),Рейтинг (Rating), Кол-во игр (Games played), Дата регистрации (Joined), Иконка GitHub (если привязан)

- summary: |
    Проверка отображения списка турниров на странице "Tournaments"
  requirement: |
    Пользователь должен видеть список всех турниров с основной информацией и возможностью открыть каждый
  prerequisites: |
    Пользователь авторизован и находится на главной странице
  test-data: |
    Нет
  steps:
    - Нажать на имя пользователя в правом верхнем углу
    - Выбрать пункт "Tournaments" из выпадающего меню
  expected-result: |
    Отображается таблица турниров с колонками: name — название турнира,type — тип турнира (team, arena, swiss, etc.),level — уровень сложности (в виде звёзд),state — статус турнира (например, waiting_participants, finished),starts_at — дата и время начала турнира,actions — кнопка "Show" для просмотра деталей

- summary: |
    Проверка создания нового турнира через интерфейс "Tournaments"
  requirement: |
    Пользователь должен иметь возможность создать новый турнир, указав все параметры и нажав кнопку "Create"
  prerequisites: |
    Пользователь авторизован и находится на странице создания турнира
  test-data: |
    Название: Tanya's tournament
    Тип: individual
    Описание: Tanya's tournament description
    Дата и время начала: 13/05/2025 17:22 (Europe/Rome)
    Access type: public
    Task strategy: random_per_game
    Score strategy: time_and_tests
    Use chat: true
    Use timer: true
    Task provider: level
    Уровень: easy
    Event: <пусто>
    Players limit: 64
    Match timeout: 177
    Break duration: 42
  steps:
    - Перейти на вкладку "Tournaments"
    - Нажать "Create tournament"
    - Заполнить поле "Name" значением "Tanya's tournament"
    - Выбрать тип турнира "individual"
    - Ввести markdown-описание Tanya's tournament description
    - Установить дату/время начала и заполнить остальные параметры (access, strategy, limits)
    - Нажать кнопку "Create"
  expected-result: |
    Новый турнир с введенными параметрами появляется в таблице турниров со статусом "waiting_participants"

- summary: |
    Проверка отображения страницы "Tasks"
  requirement: |
    Пользователь должен видеть список всех задач с возможностью просмотра каждой задачи
  prerequisites: |
    Пользователь авторизован и перешёл на страницу Tasks
  test-data: |
    Нет
  steps:
    - Нажать на аватар пользователя в правом верхнем углу
    - Выбрать пункт "Tasks"
    - Проверить, что отображается таблица задач с колонками id, name, level, tags, origin, state, visibility, updated_at, actions
    - Проверить наличие кнопки "Create new task"
    - Проверить наличие кнопки "Task packs"
    - Убедиться, что каждая задача имеет кнопку "Show"
  expected-result: |
    Страница "Tasks" корректно загружается, все колонки и кнопки отображаются, кнопки "Show" присутствуют у каждой задачи

- summary: |
    Проверка отправки письма для восстановления пароля
  requirement: |
    Пользователь должен иметь возможность запросить восстановление пароля по адресу электронной почты
  prerequisites: |
    Существующая учетная запись с email: tatiana.tupatilo@gmail.com
  test-data: |
    Email: tatiana.tupatilo@gmail.com
  steps:
    - Перейти на страницу входа (Sign In)
    - Нажать на ссылку "Forgot your password?"
    - Ввести email tatiana.tupatilo@gmail.com
    - Нажать кнопку "Submit"
  expected-result: |
    Пользователь видит уведомление "We have sent you an email with instructions on how to reset your password"
